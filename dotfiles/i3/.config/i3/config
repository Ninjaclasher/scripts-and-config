########################
#### i3 Config File ####
########################

# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#
# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 9.7

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

gaps inner 0
gaps outer 0
mouse_warping none

                ########################
                ### Command Overview ###
                ########################
########################################################
## Ctrl  + Alt .................... Run User Programs ##
## Shift + Win ............ Run Background Wallpapers ##
## Shift + Alt ...................... System Commands ##
## Alt .................................. i3 Commands ##
########################################################

set $alt                            Mod1
set $win                            Mod4
set $term                           alacritty
set $script_dir                     $HOME/.local/bin/

#####################
#### Resize Mode ####
#####################

mode "resize"
{
    ## These bindings trigger as soon as you enter the resize mode ##

    ## Change the size of the current window ##
    bindsym Left                    resize shrink width 10 px or 10 ppt
    bindsym Down                    resize grow height 10 px or 10 ppt
    bindsym Up                      resize shrink height 10 px or 10 ppt
    bindsym Right                   resize grow width 10 px or 10 ppt

    ## Change gaps size ##
    bindsym $alt+Up                 gaps inner current plus 5
    bindsym $alt+Down               gaps inner current minus 5

    ## back to normal: Enter or Escape or $alt+r ##
    bindsym Return                  mode "default"
    bindsym Escape                  mode "default"
    bindsym $alt+r                  mode "default"
}

#######################
### Mode Activation ###
#######################

bindsym $alt+r                      mode "resize"

#######################
#### Window Config ####
#######################

## Use Mouse+$alt to drag floating windows to their wanted position ##
floating_modifier $alt

## kill focused window ##
bindsym Ctrl+$alt+$win+q            kill

## change focus ##
bindsym $alt+$win+Left              focus left
bindsym $alt+$win+Down              focus down
bindsym $alt+$win+Up                focus up
bindsym $alt+$win+Right             focus right

## move focused window ##
bindsym Ctrl+$alt+$win+Left         move left
bindsym Ctrl+$alt+$win+Down         move down
bindsym Ctrl+$alt+$win+Up           move up
bindsym Ctrl+$alt+$win+Right        move right

## split in horizontal orientation ##
bindsym $alt+h                      split h

## split in vertical orientation ##
bindsym $alt+v                      split v

## enter fullscreen mode for the focused container ##
bindsym $alt+f                      fullscreen toggle

## change container layout (stacked, tabbed, toggle split) ##
bindsym $alt+s                      layout stacking
bindsym $alt+w                      layout tabbed
bindsym $alt+e                      layout toggle split

## move workspace to screen ##
bindsym $alt+m                      move workspace to output left

## toggle tiling / floating ##
bindsym $alt+space                  floating toggle

## change focus between tiling / floating windows ##
bindsym $alt+$win+space             focus mode_toggle

## focus containers ##
bindsym $alt+a                      focus parent
bindsym $alt+d                      focus child

## show/hide scratchpad ##
bindsym $alt+minus                  move scratchpad
bindsym $alt+plus                   scratchpad show

## resize windows ##
bindsym $alt+$win+Shift+Left        resize shrink width 10 px or 10 ppt
bindsym $alt+$win+Shift+Down        resize grow height 10 px or 10 ppt
bindsym $alt+$win+Shift+Up          resize shrink height 10 px or 10 ppt
bindsym $alt+$win+Shift+Right       resize grow width 10 px or 10 ppt


##########################
#### Workspace Config ####
##########################

## Define names for default workspaces for which we configure key bindings later on. We use variables to avoid repeating the names in multiple places. ##
set $ws1                            "1"
set $ws2                            "2"
set $ws3                            "3"
set $ws4                            "4"
set $ws5                            "5"
set $ws6                            "6"
set $ws7                            "7"
set $ws8                            "8"
set $ws9                            "9"
set $ws10                           "10"
set $ws11                           "11"
set $ws12                           "12"
set $ws13                           "13"
set $ws14                           "14"
set $ws15                           "15"
set $ws16                           "16"
set $ws17                           "17"
set $ws18                           "18"
set $ws19                           "19"
set $ws20                           "20"

# switch to workspace ##
bindsym $alt+Ctrl+grave             exec --no-startup-id $script_dir/goto_next_workspace
bindsym Ctrl+$alt+1                 workspace $ws1
bindsym Ctrl+$alt+2                 workspace $ws2
bindsym Ctrl+$alt+3                 workspace $ws3
bindsym Ctrl+$alt+4                 workspace $ws4
bindsym Ctrl+$alt+5                 workspace $ws5
bindsym Ctrl+$alt+6                 workspace $ws6
bindsym Ctrl+$alt+7                 workspace $ws7
bindsym Ctrl+$alt+8                 workspace $ws8
bindsym Ctrl+$alt+9                 workspace $ws9
bindsym Ctrl+$alt+0                 workspace $ws10
bindsym Ctrl+$alt+Shift+1           workspace $ws11
bindsym Ctrl+$alt+Shift+2           workspace $ws12
bindsym Ctrl+$alt+Shift+3           workspace $ws13
bindsym Ctrl+$alt+Shift+4           workspace $ws14
bindsym Ctrl+$alt+Shift+5           workspace $ws15
bindsym Ctrl+$alt+Shift+6           workspace $ws16
bindsym Ctrl+$alt+Shift+7           workspace $ws17
bindsym Ctrl+$alt+Shift+8           workspace $ws18
bindsym Ctrl+$alt+Shift+9           workspace $ws19
bindsym Ctrl+$alt+Shift+0           workspace $ws20
bindsym $alt+Tab                    workspace next_on_output
bindsym $alt+Shift+Tab              workspace prev_on_output

## move focused container to workspace ##
bindsym Ctrl+$alt+$win+grave        exec --no-startup-id $script_dir/move_next_workspace
bindsym Ctrl+$alt+$win+1            move container to workspace $ws1
bindsym Ctrl+$alt+$win+2            move container to workspace $ws2
bindsym Ctrl+$alt+$win+3            move container to workspace $ws3
bindsym Ctrl+$alt+$win+4            move container to workspace $ws4
bindsym Ctrl+$alt+$win+5            move container to workspace $ws5
bindsym Ctrl+$alt+$win+6            move container to workspace $ws6
bindsym Ctrl+$alt+$win+7            move container to workspace $ws7
bindsym Ctrl+$alt+$win+8            move container to workspace $ws8
bindsym Ctrl+$alt+$win+9            move container to workspace $ws9
bindsym Ctrl+$alt+$win+0            move container to workspace $ws10
bindsym Ctrl+$alt+$win+Shift+1      move container to workspace $ws11
bindsym Ctrl+$alt+$win+Shift+2      move container to workspace $ws12
bindsym Ctrl+$alt+$win+Shift+3      move container to workspace $ws13
bindsym Ctrl+$alt+$win+Shift+4      move container to workspace $ws14
bindsym Ctrl+$alt+$win+Shift+5      move container to workspace $ws15
bindsym Ctrl+$alt+$win+Shift+6      move container to workspace $ws16
bindsym Ctrl+$alt+$win+Shift+7      move container to workspace $ws17
bindsym Ctrl+$alt+$win+Shift+8      move container to workspace $ws18
bindsym Ctrl+$alt+$win+Shift+9      move container to workspace $ws19
bindsym Ctrl+$alt+$win+Shift+0      move container to workspace $ws20

###########################
#### Status bar Config ####
###########################

#bar
#{
#    status_command python3 $HOME/.config/i3/i3status.py
#    position top
#    colors
#    {
#        focused_workspace           #f28048 #f77433 #000000
#        urgent_workspace            #fc3f3f #f22e2e #ffffff
#        inactive_workspace          #333333 #2e2e2e #ffffff
#
#        background                  #131313
#    }
#
#    font pango:DejaVu Sans Mono 11
#}

exec_always --no-startup-id $script_dir/clipboard_manager
exec_always --no-startup-id autorandr --default default -c --force
exec --no-startup-id blueman-applet
exec --no-startup-id solaar --window hide
exec --no-startup-id xgamma -gamma 0.9
exec --no-startup-id pactl -- set-source-mute @DEFAULT_SOURCE@ on

client.focused                      #f79c6f #f28f5e #000000
client.unfocused                    #353535 #2e2e2e #ffffff

#####################################
#### Reload i3 | System Commands ####
#####################################

## Run Program ##
bindsym $alt+Shift+i                exec --no-startup-id rofi -show drun
bindsym $alt+Shift+space            exec --no-startup-id $script_dir/auth_rofi
bindsym $alt+$win+Shift+space       exec --no-startup-id FIELD=totp $script_dir/auth_rofi

## reload the configuration file ##
bindsym $alt+Shift+c                reload
## restart i3 inplace (preserves your layout/session, can be used to upgrade i3) ##
bindsym $alt+Shift+r                restart
## exit i3 (logs you out of your X session) ##
bindsym $alt+Shift+e                exec sh $script_dir/prompt "You pressed the exit shortcut. Do you really want to exit i3? This will end your X session." "exec i3-msg exit"

########################
#### User shortcuts ####
########################

## Change Brightness ##
bindsym XF86MonBrightnessUp         exec --no-startup-id brightnessctl -q set 5%+
bindsym XF86MonBrightnessDown       exec --no-startup-id brightnessctl -q set 5%-

## Change Volume ##
bindsym XF86AudioRaiseVolume        exec --no-startup-id pactl -- set-sink-volume @DEFAULT_SINK@ +2%
bindsym XF86AudioLowerVolume        exec --no-startup-id pactl -- set-sink-volume @DEFAULT_SINK@ -2%
bindsym XF86AudioMute               exec --no-startup-id pactl -- set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute            exec --no-startup-id pactl -- set-source-mute @DEFAULT_SOURCE@ toggle
bindsym $alt+Ctrl+Up                exec --no-startup-id pactl -- set-sink-volume @DEFAULT_SINK@ +2%
bindsym $alt+Ctrl+Down              exec --no-startup-id pactl -- set-sink-volume @DEFAULT_SINK@ -2%

## Run User Programs ##
bindsym --release $alt+Ctrl+e       exec --no-startup-id "notify-send \\"$(xcolor)\\""
bindsym $alt+Ctrl+x                 exec --no-startup-id xournalpp
bindsym $alt+Ctrl+l                 exec --no-startup-id thunar
bindsym $alt+Ctrl+i                 exec --no-startup-id chromium
bindsym $alt+Ctrl+t                 exec --no-startup-id $term
bindsym $alt+Ctrl+n                 exec --no-startup-id subl
bindsym $alt+Ctrl+p                 exec --no-startup-id $term -t python3 -e python3 -q
bindsym $alt+Ctrl+equal             exec --no-startup-id "$term -o font.size=11 -t Calculator -e python3 -q -i -c \\"import sys; import math; sys.ps1='[calculator $] '\\""
bindsym XF86Calculator              exec --no-startup-id "$term -o font.size=11 -t Calculator -e python3 -q -i -c \\"import sys; import math; sys.ps1='[calculator $] '\\""
bindsym $alt+Ctrl+minus             exec --no-startup-id $term -o font.size=11 -e isympy

## Set keyboard layout ##
bindsym $alt+Ctrl+h                 exec --no-startup-id setxkbmap us
bindsym $alt+Ctrl+j                 exec --no-startup-id setxkbmap us -variant dvp

## Take Screenshots ##
bindsym --release Print             exec --no-startup-id flameshot full
bindsym --release $win+Print        exec --no-startup-id flameshot gui
bindsym --release $win+Shift+Print  exec --no-startup-id flameshot screen

## Remove Borders ##
for_window [class="Chromium"]       border none
for_window [class="discord"]        border none
for_window [class="Firefox"]        border none
for_window [class="Slack"]          border none
for_window [class="Signal"]         border none
for_window [class="Subl"]           border none
for_window [class="thunderbird"]    border none

## Assign Programs ##
assign [class="Abeluna"]            $ws7
assign [class="thunderbird"]        $ws8
assign [class="Signal"]             $ws9
assign [class="discord"]            $ws10

## Wallpaper Commands ##
bindsym $win+Shift+u                exec --no-startup-id $script_dir/load_wallpaper "1"
bindsym $win+Shift+w                exec --no-startup-id $script_dir/load_wallpaper "2"
bindsym $win+Shift+g                exec --no-startup-id $script_dir/load_wallpaper "3"
bindsym $win+Shift+n                exec --no-startup-id $script_dir/load_wallpaper "4"
bindsym $win+Shift+r                exec --no-startup-id $script_dir/load_wallpaper "5"
bindsym $win+Shift+c                exec --no-startup-id $script_dir/load_wallpaper "6"

##################################
#### Move mouse with keyboard ####
##################################
set $pos_s                          5
set $pos_n                          25
set $pos_f                          100

bindsym $win+Down                   exec --no-startup-id "xdotool mousemove_relative 0 $pos_n, xdotool selectwindow"
bindsym $win+Up                     exec --no-startup-id "xdotool mousemove_relative -- 0 -$pos_n, xdotool selectwindow"
bindsym $win+Right                  exec --no-startup-id "xdotool mousemove_relative $pos_n 0, xdotool selectwindow"
bindsym $win+Left                   exec --no-startup-id "xdotool mousemove_relative -- -$pos_n 0, xdotool selectwindow"

bindsym $win+Return                 exec --no-startup-id xdotool click 1
bindsym $win+Shift+Return           exec --no-startup-id xdotool click 2
bindsym $win+Ctrl+Return            exec --no-startup-id xdotool click 3

bindsym $win+Shift+Down             exec --no-startup-id "xdotool mousemove_relative 0 $pos_s, xdotool selectwindow"
bindsym $win+Shift+Up               exec --no-startup-id "xdotool mousemove_relative -- 0 -$pos_s, xdotool selectwindow"
bindsym $win+Shift+Right            exec --no-startup-id "xdotool mousemove_relative $pos_s 0, xdotool selectwindow"
bindsym $win+Shift+Left             exec --no-startup-id "xdotool mousemove_relative -- -$pos_s 0, xdotool selectwindow"

bindsym $win+Ctrl+Down              exec --no-startup-id "xdotool mousemove_relative 0 $pos_f, xdotool selectwindow"
bindsym $win+Ctrl+Up                exec --no-startup-id "xdotool mousemove_relative -- 0 -$pos_f, xdotool selectwindow"
bindsym $win+Ctrl+Right             exec --no-startup-id "xdotool mousemove_relative $pos_f 0, xdotool selectwindow"
bindsym $win+Ctrl+Left              exec --no-startup-id "xdotool mousemove_relative -- -$pos_f 0, xdotool selectwindow"
